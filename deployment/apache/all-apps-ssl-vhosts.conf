# Apache SSL VirtualHost Configurations for All Apps
# HTTPS configuration with Let's Encrypt certificates

# Main xtuff.ai - Port 8500 (All Applications Runner)
<VirtualHost *:443>
    ServerName xtuff.ai
    ServerAlias www.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    ErrorLog ${APACHE_LOG_DIR}/xtuff-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/xtuff-ssl-access.log combined

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8500/
    ProxyPassReverse / http://127.0.0.1:8500/

    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8500/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8500/$1 [P,L]
</VirtualHost>

# Social Xtuff - Port 8501
<VirtualHost *:443>
    ServerName social.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    ErrorLog ${APACHE_LOG_DIR}/social-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/social-ssl-access.log combined

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8501/
    ProxyPassReverse / http://127.0.0.1:8501/

    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8501/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8501/$1 [P,L]
</VirtualHost>

# Codexes Factory - Port 8502
<VirtualHost *:443>
    ServerName codexes.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    ErrorLog ${APACHE_LOG_DIR}/codexes-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/codexes-ssl-access.log combined

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8502/
    ProxyPassReverse / http://127.0.0.1:8502/

    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8502/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8502/$1 [P,L]
</VirtualHost>

# Trillions of People - Port 8504
<VirtualHost *:443>
    ServerName trillions.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    ErrorLog ${APACHE_LOG_DIR}/trillions-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/trillions-ssl-access.log combined

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8504/
    ProxyPassReverse / http://127.0.0.1:8504/

    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8504/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8504/$1 [P,L]
</VirtualHost>

# Daily Engine - Port 8509
<VirtualHost *:443>
    ServerName daily.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    ErrorLog ${APACHE_LOG_DIR}/daily-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/daily-ssl-access.log combined

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8509/
    ProxyPassReverse / http://127.0.0.1:8509/

    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8509/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8509/$1 [P,L]
</VirtualHost>

# AI Resume Builder - Port 8512
<VirtualHost *:443>
    ServerName resume.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    ErrorLog ${APACHE_LOG_DIR}/resume-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/resume-ssl-access.log combined

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8512/
    ProxyPassReverse / http://127.0.0.1:8512/

    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8512/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8512/$1 [P,L]
</VirtualHost>

# Legacy domains kept for backwards compatibility

# Collectiverse - Port 8503
<VirtualHost *:443>
    ServerName collectiverse.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    ErrorLog ${APACHE_LOG_DIR}/collectiverse-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/collectiverse-ssl-access.log combined

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8503/
    ProxyPassReverse / http://127.0.0.1:8503/

    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8503/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8503/$1 [P,L]
</VirtualHost>

# altDOGE - Port 8505
<VirtualHost *:443>
    ServerName altdoge.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    ErrorLog ${APACHE_LOG_DIR}/altdoge-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/altdoge-ssl-access.log combined

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8505/
    ProxyPassReverse / http://127.0.0.1:8505/

    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8505/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8505/$1 [P,L]
</VirtualHost>

# Old Daily Engine domain (redirect to daily.xtuff.ai)
<VirtualHost *:443>
    ServerName dailyengine.xtuff.ai
    ServerAdmin wfzimmerman@gmail.com

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/xtuff.ai/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/xtuff.ai/privkey.pem

    Redirect permanent / https://daily.xtuff.ai/
</VirtualHost>
