% Nimble Ultra Cover Template
% Professional cover design for academic, government, and intelligence publications
% Trim size: 8.5" x 11"

\documentclass[12pt]{article}

% Required packages
\usepackage{fontspec}
\usepackage{geometry}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{ifthen}
\usepackage{luaquotes}

% Font setup
\setmainfont{Adobe Caslon Pro}
\setsansfont{Neulis Sans}

% --- These values are replaced by the Python script ---
\newcommand{\coverPageHeight}{11in}
\newcommand{\coverPageWidth}{17.125in}
\newcommand{\coverBookTitle}{Book Title}
\newcommand{\coverBookAuthor}{Author Name}
\newcommand{\coverImprint}{Nimble Ultra}
\newcommand{\coverBookSubtitleChunk}{}
\newcommand{\coverDrawBarcode}{}

% Placeholders for dynamic values
\newcommand{\coverTrimWidth}{8.5in}
\newcommand{\coverTrimHeight}{11.0in}
\newcommand{\coverSpineWidth}{0.125in}
\newcommand{\coverBleedIn}{0.125in}
\newcommand{\coverFrontCoverXShift}{4.3125in}
\newcommand{\coverBackCoverXShift}{-4.3125in}
\newcommand{\coverBackCoverText}{Back cover text goes here.}
\newcommand{\coverDebugMode}{false}

% Define professional colors for Nimble Ultra
\definecolor{coverbackground}{RGB}{240, 240, 240}
\definecolor{coveraccent}{RGB}{0, 51, 102}
\definecolor{covertext}{RGB}{20, 20, 20}
\definecolor{spinetext}{RGB}{255, 255, 255}

% Set page dimensions
\geometry{
  paperheight=\coverPageHeight,
  paperwidth=\coverPageWidth,
  margin=0in
}

% No page numbers
\pagestyle{empty}

\begin{document}

\begin{tikzpicture}[remember picture, overlay]

    % Background
    \fill[coverbackground] (current page.south west) rectangle (current page.north east);

    % Spine background (accent color)
    \fill[coveraccent] ([xshift=-\coverSpineWidth/2]current page.south) rectangle ([xshift=\coverSpineWidth/2]current page.north);

    % Spine text (rotated)
    \node[
        rotate=270,
        anchor=center,
        text=spinetext,
        font=\Large\sffamily\bfseries
    ] at (current page.center) {\coverBookTitle};

    % --- FRONT COVER ---
    \coordinate (frontcenter) at ([xshift=\coverFrontCoverXShift]current page.center);

    % Front cover accent bar (top)
    \fill[coveraccent] ([yshift=4.5in, xshift=-4.25in]frontcenter) rectangle ([yshift=5.5in, xshift=4.25in]frontcenter);

    % Title (centered in upper portion)
    \node[
        anchor=center,
        text width=7in,
        align=center,
        text=covertext,
        font=\Huge\sffamily\bfseries
    ] at ([yshift=2.5in]frontcenter) {\coverBookTitle};

    % Subtitle (if provided)
    \coverBookSubtitleChunk

    % Author name (lower portion)
    \node[
        anchor=center,
        text=covertext,
        font=\Large\sffamily
    ] at ([yshift=-3.5in]frontcenter) {\coverBookAuthor};

    % Imprint name (bottom)
    \node[
        anchor=center,
        text=coveraccent,
        font=\large\sffamily\bfseries
    ] at ([yshift=-4.75in]frontcenter) {\coverImprint};

    % --- BACK COVER ---
    \coordinate (backcenter) at ([xshift=\coverBackCoverXShift]current page.center);

    % Back cover text block
    \node[
        anchor=north,
        text width=7in,
        align=justify,
        text=covertext,
        font=\normalsize\rmfamily
    ] at ([yshift=4in]backcenter) {\coverBackCoverText};

    % Barcode area (if provided)
    \coverDrawBarcode

    % Debug mode guides (if enabled)
    \ifthenelse{\equal{\coverDebugMode}{true}}{
        \draw[red, thick] ([xshift=\coverFrontCoverXShift-4.25in]current page.south) -- ([xshift=\coverFrontCoverXShift-4.25in]current page.north);
        \draw[red, thick] ([xshift=\coverFrontCoverXShift+4.25in]current page.south) -- ([xshift=\coverFrontCoverXShift+4.25in]current page.north);
        \draw[red, thick] ([xshift=\coverBackCoverXShift-4.25in]current page.south) -- ([xshift=\coverBackCoverXShift-4.25in]current page.north);
        \draw[red, thick] ([xshift=\coverBackCoverXShift+4.25in]current page.south) -- ([xshift=\coverBackCoverXShift+4.25in]current page.north);
    }{}

\end{tikzpicture}

\end{document}
